# --- T2-COPYRIGHT-NOTE-BEGIN ---
# T2 SDE: package/*/hfsutils/hotfix-gcc14.patch
# Copyright (C) 2024 The T2 SDE Project
# 
# This Copyright note is generated by scripts/Create-CopyPatch,
# more information can be found in the files COPYING and README.
# 
# This patch file is dual-licensed. It is available under the license the
# patched project is licensed under, as long as it is an OpenSource license
# as defined at http://www.opensource.org/ (e.g. BSD, X11) or under the terms
# of the GNU General Public License version 2 as used by the T2 SDE.
# --- T2-COPYRIGHT-NOTE-END ---

--- hfsutils-3.2.6/libhfs/configure.vanilla	2024-07-17 21:23:24.092569096 +0200
+++ hfsutils-3.2.6/libhfs/configure	2024-07-17 21:23:43.656567211 +0200
@@ -657,7 +657,7 @@
 cat > conftest.$ac_ext <<EOF
 #line 659 "configure"
 #include "confdefs.h"
-main(){return(0);}
+int main(){return(0);}
 EOF
 if { (eval echo configure:663: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
   ac_cv_prog_cc_works=yes
--- hfsutils-3.2.6/configure.vanilla	2024-07-17 21:20:52.827583671 +0200
+++ hfsutils-3.2.6/configure	2024-07-17 21:22:58.129571598 +0200
@@ -711,7 +711,7 @@
 cat > conftest.$ac_ext <<EOF
 #line 713 "configure"
 #include "confdefs.h"
-main(){return(0);}
+int main(){return(0);}
 EOF
 if { (eval echo configure:717: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
   ac_cv_prog_cc_works=yes
@@ -1290,6 +1290,7 @@
   cat > conftest.$ac_ext <<EOF
 #line 1292 "configure"
 #include "confdefs.h"
+#include <string.h>
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
 #include <assert.h>
--- hfsutils-3.2.6/hpwd.c.vanilla	2024-07-17 21:24:42.991561494 +0200
+++ hfsutils-3.2.6/hpwd.c	2024-07-17 21:24:52.378560589 +0200
@@ -24,6 +24,7 @@
 # endif
 
 # include <stdio.h>
+# include <string.h>
 
 # include "hfs.h"
 # include "hcwd.h"
--- hfsutils-3.2.6/librsrc/configure.vanilla	2024-07-17 21:27:12.274547110 +0200
+++ hfsutils-3.2.6/librsrc/configure	2024-07-17 21:27:18.689546492 +0200
@@ -657,7 +657,7 @@
 cat > conftest.$ac_ext <<EOF
 #line 659 "configure"
 #include "confdefs.h"
-main(){return(0);}
+int main(){return(0);}
 EOF
 if { (eval echo configure:663: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
   ac_cv_prog_cc_works=yes
