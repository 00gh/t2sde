# --- T2-COPYRIGHT-NOTE-BEGIN ---
# T2 SDE: package/*/djv/djv.conf
# Copyright (C) 2007 - 2022 The T2 SDE Project
# 
# This Copyright note is generated by scripts/Create-CopyPatch,
# more information can be found in the files COPYING and README.
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License version 2.
# --- T2-COPYRIGHT-NOTE-END ---

djv_prepare() {
    export BUILD_DIR=/usr
    sed -i -e s',$ENV{HOME}/tmp,,' \
	-i -e s',/usr/bin,/opt/djv/bin,' CMakeLists.txt
    [[ $libdir = *lib64 ]] && sed -i -e s',/djv/lib,/djv/lib64,' CMakeLists.txt
 
    sed -i -e s',int(this),long(this),' bin/djv_view/window_image.cxx \
	bin/djv_view/window_file.cxx
    cmake $cmakeopt . # TODO: use generic build infrastructure
}
hook_add preconf 5 djv_prepare
