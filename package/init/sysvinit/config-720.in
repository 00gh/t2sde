# --- T2-COPYRIGHT-NOTE-BEGIN ---
# T2 SDE: package/*/sysvinit/config-720.in
# Copyright (C) 2004 - 2023 The T2 SDE Project
# 
# This Copyright note is generated by scripts/Create-CopyPatch,
# more information can be found in the files COPYING and README.
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License version 2.
# --- T2-COPYRIGHT-NOTE-END ---

menu_begin MENU_INIT 'Init system'
	# Any package available with INIT flag can be _the_ Init.
	# We will prefer sysvinit, and if no INIT is available a warning
	# will be shown
	# Not being _the_ init doesn't mean the package should be disabled,
	# because it may have usefull tools too.

	CFGTEMP_INIT_LIST=

	for x in `grep -e ' INIT ' config/$config/packages | cut -d' ' -f5`; do
		var_append CFGTEMP_INIT_LIST ' ' \
		"$x $x,_$(grep -e '^\[I\]' package/*/$x/$x.desc \
			| cut -d' ' -f2- | tr ' ' '_')"
	done

	if [ -z "$CFGTEMP_INIT_LIST" ]; then
		CFGTEMP_INIT_LIST="none WARNING:_No_init_was_selected!"
	fi

	choice SDECFG_INIT sysvinit $CFGTEMP_INIT_LIST
	
	# default init must get enabled
	[ "$SDECFG_INIT" != "none" ] && pkgenable $SDECFG_INIT

	comment ' '

	# do package specific config
	[ -s $cfgtmpdir/subconfig-init.in ] && . $cfgtmpdir/subconfig-init.in

	if [ -n "$CFGTEMP_INIT_INITSTYLES" ]; then
		comment '-- Select Init Style'

		# backguard compatibility
		[ -z "$SDECFG_INIT_STYLE" ] && SDECFG_INIT_STYLE="$SDECFG_PKG_SYSVINIT_INITSTYLE"

		choice SDECFG_INIT_STYLE sysv_nice $CFGTEMP_INIT_INITSTYLES
	fi
menu_end
